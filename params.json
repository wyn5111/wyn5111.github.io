{
  "name": "Wyn5111.GitHub.io",
  "tagline": "management",
  "body": "# wyn5111.github.io\r\nmanagement\r\n\r\n\r\n//server.php\r\n\r\n<?php\r\n    //header(\"Content-Type:text/plain;charset=utf-8\");\r\n    //发送的内容为json\r\n    header(\"Content-Type:application/json;charset=utf-8\");\r\n    //多维数组\r\n    $staff = array (\r\n        array(\"name\" => \"wanguanna\",\"number\" => \"1\",\"sex\" =>\"男\",\"job\" => \"总经理\"),\r\n        array(\"name\" => \"wanguanna\",\"number\" => \"2\",\"sex\" =>\"男\",\"job\" => \"付经理\"),\r\n        array(\"name\" => \"wanguanna\",\"number\" => \"3\",\"sex\" =>\"女\",\"job\" => \"员工\")\r\n    );\r\n    //请求的判断,$_超全局变量的开头，不适用global关键字\r\n    if($_SERVER['REQUEST_METHOD'] == 'GET'){\r\n            search();\r\n    }else if($_SERVER['REQUEST_METHOD'] =='POST'){\r\n            create();    \r\n    }\r\n    //检查是否有员工编号的参数\r\n    function search(){\r\n            if(!isset($_GET['number']) || empty($_GET['number'])){\r\n                    echo '{\"success\": false,\"msg\": \"参数错误\"}';\r\n                    return;\r\n                }\r\n            global $staff;\r\n            //获取number参数\r\n            $number = $_GET['number'];\r\n            $result = '{\"success\": false,\"msg\": \"没有找到员工\"}';\r\n            \r\n            //遍历$staff多维数组，查找key值为number的员工是否存在\r\n            foreach($staff as $value){\r\n                    if($value[\"number\"] == $number){\r\n                            $result = '{\"success\":true,\"msg\":\"找到员工：员工编号:'.$value[\"number\"].',员工姓名：'.$value[\"name\"].',员工性别：'.$value[\"sex\"].',员工职位：'.$value[\"job\"].'\"}';\r\n                            break;\r\n                        }\r\n                }\r\n            echo $result;\r\n        }\r\n    //创建员工\r\n    function create(){\r\n            //判断信息是否填写完成\r\n            if(!isset($_POST[\"name\"]) || empty($_POST[\"name\"]) ||\r\n               !isset($_POST[\"number\"]) || empty($_POST[\"number\"]) ||\r\n               !isset($_POST[\"sex\"]) || empty($_POST[\"sex\"]) ||\r\n               !isset($_POST[\"job\"]) || empty($_POST[\"job\"])\r\n            \r\n            ){\r\n                \r\n                echo '{\"success\": false,\"msg\": \"员工信息填写不全\"}';\r\n                return;\r\n            }\r\n            \r\n            echo '{\"success\": true,\"msg\":\"员工：\".$_POST[\"name\"].\"信息保存成功\"}';\r\n            \r\n        }\r\n    \r\n?>\r\n\r\n \r\n\r\n//html\r\n\r\n<!doctype html>\r\n<html>\r\n<head>\r\n<meta charset=\"utf-8\">\r\n<title>无标题文档</title>\r\n</head>\r\n\r\n<body>\r\n<h1>员工查询</h1>\r\n<label>请输入员工编号</label>\r\n<input type=\"text\" id=\"keyword\">\r\n<button id=\"search\">查询</button>\r\n<p id=\"searchResult\"></p>\r\n\r\n<h1>添加员工</h1>\r\n<label>请输入员工姓名</label>\r\n<input type=\"text\" id=\"name\"><br/>\r\n<label>请输入员工编号</label>\r\n<input type=\"text\" id=\"number\"><br/>\r\n<label>请输入员工性别</label>\r\n<select id=\"sex\"><br/>\r\n    <option>\r\n        男\r\n    </option>\r\n    <option>\r\n        女\r\n    </option>\r\n</select><br/>\r\n<label>请输入员工职位</label>\r\n<input type=\"text\" id=\"job\"><br/>\r\n<button id=\"save\">添加</button><br/>\r\n<p id=\"createResult\"></p>\r\n\r\n<script>\r\n//查询请求绑定事件\r\n    document.getElementById(\"search\").onclick = function(){\r\n        //发送查询请求并处理\r\n        var request = new XMLHttpRequest();\r\n        request.open(\"GET\",\"server.php?number=\"+document.getElementById(\"keyword\").value);\r\n        request.send();\r\n        request.onreadystatechange = function(){\r\n                if(request.readyState === 4){\r\n                    if(request.status === 200){\r\n                            //解析\r\n                            var data= JSON.parse(request.responseText);\r\n                            if(data.success === true){\r\n                                    document.getElementById(\"searchResult\").innerHTML = data.msg;\r\n                                }\r\n                            else{\r\n                                    document.getElementById(\"searchResult\").innerHTML = \"出现错误\"+data.msg;\r\n                                }\r\n                            \r\n                       }else{\r\n                            alert(\"发生错误\"+request.status);\r\n                     }\r\n                 }\r\n            }\r\n    }\r\n//添加请求绑定事件    \r\n    document.getElementById(\"save\").onclick = function(){\r\n        var request = new XMLHttpRequest();\r\n        request.open(\"POST\",\"server.php\");\r\n        var data = \"name=\"+document.getElementById(\"name\").value+\"&number=\"+document.getElementById(\"number\").value+\"&sex=\"+document.getElementById(\"sex\").value+\"&job=\"+document.getElementById(\"job\").value;\r\n        //必须要设置setRequestHeader()方法,否则不成功\r\n        request.setRequestHeader(\"Content-Type\",\"application/x-www-form-urlencoded\");\r\n        request.send(data);\r\n        request.onreadystatechange = function(){\r\n                if(request.readyState === 4){\r\n                    if(request.status === 200){\r\n                            var data= JSON.parse(request.responseText);\r\n                            if(data.success === true){\r\n                                    document.getElementById(\"createResult\").innerHTML = data.msg;\r\n                                }\r\n                            else{\r\n                                    document.getElementById(\"createResult\").innerHTML = \"出现错误\"+ data.msg;\r\n                                }\r\n                       }else{\r\n                            alert(\"发生错误\"+request.status);\r\n                     }\r\n                 }\r\n            }\r\n    }\r\n</script>\r\n</body>\r\n</html>\r\n\r\n \r\n",
  "note": "Don't delete this file! It's used internally to help with page regeneration."
}